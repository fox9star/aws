<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ“š Book Management API Â· ê²€ìƒ‰ ë°ëª¨</title>
  <style>
    :root { --bg:#f7f9fc; --text:#2c3e50; --muted:#6c7a89; --primary:#4a6cf7; --card:#fff; --code:#f0f2f5; }
    body { margin:0; background:var(--bg); color:var(--text); font-family:'Noto Sans KR', Arial, sans-serif; }
    header { background:var(--card); border-bottom:1px solid #eaecee; padding:20px; position:sticky; top:0; }
    main { max-width:960px; margin:24px auto; padding:0 16px; }
    .card { background:var(--card); border:1px solid #eaecee; border-radius:12px; padding:20px; margin-bottom:20px; }
    h1 { margin:0; font-size:22px; }
    h2 { margin-top:0; font-size:20px; }
    .row { display:grid; grid-template-columns:1fr auto; gap:12px; }
    input { padding:10px; border:1px solid #dfe4ea; border-radius:8px; width:100%; }
    button { background:var(--primary); color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; }
    table { width:100%; border-collapse:collapse; margin-top:12px; }
    th, td { border-bottom:1px solid #eceff3; padding:10px; text-align:left; }
    .note { color:var(--muted); font-size:14px; }
    #results, #fieldResults { max-height:300px; overflow-y:auto; margin-top:12px; }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ“š Book Management API Â· ê²€ìƒ‰ ë°ëª¨</h1>
    <p class="note">GitHub PagesëŠ” ì •ì  ë¬¸ì„œë¥¼ ì œê³µí•˜ë©°, ê²€ìƒ‰ì€ ì™¸ë¶€ ì‹¤í–‰ ì¤‘ì¸ API ì„œë²„ì— ìš”ì²­í•©ë‹ˆë‹¤.</p>
  </header>

  <main>
    <section class="card">
      <h2>API ì„œë²„ ì£¼ì†Œ ì„¤ì •</h2>
      <input id="baseUrl" placeholder="API Base URL (ì˜ˆ: http://localhost:3000)" />
      <button id="saveUrl">ì €ì¥</button>
    </section>

    <section class="card">
      <h2>ë¹ ë¥¸ ê²€ìƒ‰</h2>
      <input id="query" placeholder="í‚¤ì›Œë“œ (ì œëª©/ì €ì/ISBN)" />
      <button id="searchBtn">ê²€ìƒ‰</button>
      <div id="results"></div>
    </section>

    <section class="card">
      <h2>í•„ë“œë³„ ê²€ìƒ‰</h2>
      <input id="title" placeholder="ì œëª©" />
      <input id="author" placeholder="ì €ì" />
      <input id="isbn" placeholder="ISBN" />
      <button id="fieldSearchBtn">ê²€ìƒ‰</button>
      <div id="fieldResults"></div>
    </section>
  </main>

  <script>
    const baseUrlInput = document.getElementById('baseUrl');
    const saveUrlBtn = document.getElementById('saveUrl');
    const queryInput = document.getElementById('query');
    const searchBtn = document.getElementById('searchBtn');
    const resultsDiv = document.getElementById('results');
    const titleInput = document.getElementById('title');
    const authorInput = document.getElementById('author');
    const isbnInput = document.getElementById('isbn');
    const fieldSearchBtn = document.getElementById('fieldSearchBtn');
    const fieldResultsDiv = document.getElementById('fieldResults');

    baseUrlInput.value = localStorage.getItem('bookapi_baseurl') || '';
    saveUrlBtn.onclick = () => {
      localStorage.setItem('bookapi_baseurl', baseUrlInput.value.trim());
      alert('API ì£¼ì†Œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
    };

    async function fetchJSON(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error('ìš”ì²­ ì‹¤íŒ¨: ' + res.status);
      return res.json();
    }

    function renderTable(container, items) {
      if (!items.length) {
        container.innerHTML = '<p class="note">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        return;
      }
      const rows = items.map(b => `
        <tr><td>${b.title||''}</td><td>${b.author||''}</td><td>${b.isbn||''}</td><td>${b.year||''}</td></tr>